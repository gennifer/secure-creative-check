<html>
    <head>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js" ></script>
        <style>
        #calls {
            font-weight: bold;
        }
        #urlhtml {
            display:none;
        }
        #unsecure {
            background: yellow;
        }
        </style>
    </head>
    <body>
        <form id="form" onsubmit="return false;">
            <input type="text" id="userInput" value="http://www.sizmek.com" />
            <input type="submit" onclick="runOnClick();" />
        </form>
        <div id="unsecure"></div>
        <div id="allgood"></div>
        <div id="urlhtml"></div>
        <script type="text/javascript">
            var urlHtml = document.getElementById('urlhtml');
            var unsecureScripts = document.getElementById('unsecure');
            var scriptTags = urlHtml.getElementsByTagName('script');
                //checking if onclick for value in input works
            function otherName() {
                var input = document.getElementById("userInput").value;
                alert(input);
            }
                // jquery.xdomainajax.js  ------ from padolsey
            function runOnClick() {
                var your_url = document.getElementById("userInput").value;

                jQuery.ajax = (function(_ajax){

                    var protocol = location.protocol,
                        hostname = location.hostname,
                        exRegex = RegExp(protocol + '//' + hostname),
                        YQL = 'http' + (/^https/.test(protocol)?'s':'') + '://query.yahooapis.com/v1/public/yql?callback=?',
                        query = 'select * from html where url="{URL}" and xpath="*"';

                    function isExternal(url) {
                        return !exRegex.test(url) && /:\/\//.test(url);
                    }

                    return function(o) {

                        var url = o.url;

                        if ( /get/i.test(o.type) && !/json/i.test(o.dataType) && isExternal(url) ) {

                            // Manipulate options so that JSONP-x request is made to YQL

                            o.url = YQL;
                            o.dataType = 'json';

                            o.data = {
                                q: query.replace(
                                    '{URL}',
                                    url + (o.data ?
                                        (/\?/.test(url) ? '&' : '?') + jQuery.param(o.data)
                                    : '')
                                ),
                                format: 'xml'
                            };

                            // Since it's a JSONP request
                            // complete === success
                            if (!o.success && o.complete) {
                                o.success = o.complete;
                                delete o.complete;
                            }

                            o.success = (function(_success){
                                return function(data) {

                                    if (_success) {
                                        // Fake XHR callback.
                                        _success.call(this, {
                                            responseText: data.results[0]
                                                // YQL screws with <script>s
                                                // Get rid of them
                                                //.replace(/<script[^>]+?\/>|<script(.|\s)*?\/script>/gi, '')
                                                
                                                // .replace(/<img[^>]+?\/>|<img(.|\s)*?\/img>/gi, '')
                                                // .replace(/<meta[^>]+?\/>|<meta(.|\s)*?\/meta>/gi, '')
                                                // .replace(/<meta[^>]+?\/>|<meta(.|\s)*?\/meta>/gi, '')
                                                // .replace(/<a[^>]+?\/>|<a(.|\s)*?\/a>/gi, '')
                                                // .replace(/<ul[^>]+?\/>|<ul(.|\s)*?\/ul>/gi, '')
                                        }, 'success');
                                    }

                                };
                            })(o.success);

                        }

                        return _ajax.apply(this, arguments);

                    };

                })(jQuery.ajax);



                $.ajax({
                    url: your_url,
                    type: 'GET',
                    success: function(res) {
                        var text = [];
                        var text = res.responseText;
                            // then you can manipulate your text as you wish
                            //append to a div on the page
                        var urlHtml = document.getElementById('urlhtml');
                        var temp = document.createElement('div');

                        temp.innerHTML = text;
                        while (temp.firstChild) {
                            urlHtml.appendChild(temp.firstChild);
                        }


                        securityCheck();

                        while(urlHtml.firstChild){
                            urlHtml.removeChild(urlHtml.firstChild);
                        }

                        
                    }
                });
            }

            function securityCheck() {
                for (i = 0; i < scriptTags.length; i++) {
                    if (scriptTags[i].hasAttribute('src')) {
                        switch (scriptTags[i].getAttribute('src').slice(0,5).toLowerCase()) {
                            case "http:":
                                var newDiv = document.createElement('div');
                                    newDiv.id = 'script' + i;
                                var appendedDiv = unsecureScripts.appendChild(newDiv);
                                appendedDiv.innerHTML = scriptTags[i].getAttribute('src');
                                console.log("IMPORTANT");
                                console.log("contain http");
                                console.log(scriptTags[i]);
                                break;
                            case "https":
                                var newDiv = document.createElement('div');
                                    newDiv.id = 'secured' + i;
                                var appendedDiv = document.getElementById('allgood').appendChild(newDiv);
                                appendedDiv.innerHTML = "<i>also contains secure</i>";
                                console.log("contain SSL https");
                                console.log(scriptTags[i]);
                                break;
                            default:
                                var newDiv = document.createElement('div');
                                    newDiv.id = 'secured' + i;
                                var appendedDiv = document.getElementById('allgood').appendChild(newDiv);
                                appendedDiv.innerHTML = "<i>also contains local reference</i>";
                                console.log("does not contain http");
                                console.log(scriptTags[i]);
                        }
                    } else {
                        var newDiv = document.createElement('div');
                            newDiv.id = 'secured' + i;
                        var appendedDiv = document.getElementById('allgood').appendChild(newDiv);
                        appendedDiv.innerHTML = "<i>also contains inline</i>";
                        console.log("contains inline javascript");
                        console.log(scriptTags[i]);
                    }
                }
                
            }


        </script>
    </body>
</html>